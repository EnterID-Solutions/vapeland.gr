{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-alphabank" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="container-fluid">
    {% if error_warning %}
    <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    {% endif %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-cogs"></i> {{ heading_title }}</h3>
      </div>
      <div class="panel-body">
		<form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-alphabank" class="form-horizontal">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#tab-settings" data-toggle="tab">{{ tab_settings }}</a></li>
                <li class=""><a href="#tab-installments" data-toggle="tab">{{ tab_installments }}</a></li>
                <li class=""><a href="#tab-about" data-toggle="tab">{{ tab_about }}</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="tab-settings">
                    <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
                    <div class="col-sm-10">
                      <select name="payment_alphabank_status" id="input-status" class="form-control">
                    	{% if payment_alphabank_status %}
                    		<option value="1" selected="selected">{{ text_enabled }}</option>
                    		<option value="0">{{ text_disabled }}</option>
                    	 {% else %}
                    		<option value="1">{{ text_enabled }}</option>
                    		<option value="0" selected="selected">{{ text_disabled }}</option>
                        {% endif %}
                      </select>
                    </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label" for="input-live-demo">{{ entry_test }}</label>
                      <div class="col-sm-10">
                        <select name="payment_alphabank_test" id="input-live-demo" class="form-control">
                      	{% if payment_alphabank_test %}
                      		<option value="1" selected="selected">{{ text_yes }}</option>
                      		<option value="0">{{ text_no }}</option>
                      	 {% else %}
                      		<option value="1">{{ text_yes }}</option>
                      		<option value="0" selected="selected">{{ text_no }}</option>
                          {% endif %}
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-sm-2 control-label" for="input-debug">{{ entry_debug }}</label>
                      <div class="col-sm-10">
                        <select name="payment_alphabank_debug" id="input-debug" class="form-control">
                      	{% if payment_alphabank_debug %}
                      		<option value="1" selected="selected">{{ text_yes }}</option>
                      		<option value="0">{{ text_no }}</option>
                      	 {% else %}
                      		<option value="1">{{ text_yes }}</option>
                      		<option value="0" selected="selected">{{ text_no }}</option>
                          {% endif %}
                        </select>
                      </div>
                    </div>
                    <div class="form-group required">
                    <label class="col-sm-2 control-label" for="entry-merchantid">{{ entry_mid }}</label>
                    <div class="col-sm-10">
                      <input type="text" name="payment_alphabank_mid" value="{{ payment_alphabank_mid }}" placeholder="{{ entry_mid }}" id="entry-merchantid" class="form-control" />
                      {% if error_mid %}
                    	  <div class="text-danger">{{ error_mid }}</div>
                      {% endif %}
                    </div>
                    </div>
                    <div class="form-group required">
                    <label class="col-sm-2 control-label" for="entry-secret">{{ entry_secret }}</label>
                    <div class="col-sm-10">
                      <input type="text" name="payment_alphabank_secret" value="{{ payment_alphabank_secret }}" placeholder="{{ entry_secret }}" id="entry-secret" class="form-control" />
                      {% if error_secret %}
                    	  <div class="text-danger">{{ error_secret }}</div>
                      {% endif %}
                    </div>
                    </div>
                    <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-sale">{{ entry_sale }}</label>
                    <div class="col-sm-10">
                    <select name="payment_alphabank_sale" id="input-sale" class="form-control">
                  	{% if payment_alphabank_sale == 1 %}
                  		<option value="1" selected="selected">{{ text_sale }}</option>
                  		<option value="2">{{ text_pre_authorization }}</option>
                  	 {% else %}
                  		<option value="1">{{ text_sale }}</option>
                  		<option value="2" selected="selected">{{ text_pre_authorization }}</option>
                      {% endif %}
                    </select>
                    </div>
                    </div>
                    <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-3ds">{{ entry_3ds }}</label>
                    <div class="col-sm-10">
                      <select name="payment_alphabank_3ds" id="input-3ds" class="form-control">
                    	{% if payment_alphabank_3ds %}
                    		<option value="1" selected="selected">{{ text_yes }}</option>
                    		<option value="0">{{ text_no }}</option>
                    	 {% else %}
                    		<option value="1">{{ text_yes }}</option>
                    		<option value="0" selected="selected">{{ text_no }}</option>
                        {% endif %}
                      </select>
                    </div>
                    </div>
                    <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-language">{{ entry_language }}</label>
                    <div class="col-sm-10">
                    <select name="payment_alphabank_language" id="input-language" class="form-control">
                  	{% if payment_alphabank_language == 'EL' %}
                  		<option value="EL" selected="selected">{{ text_el }}</option>
                  		<option value="EN">{{ text_en }}</option>
                  	 {% else %}
                  		<option value="EL">{{ text_el }}</option>
                  		<option value="EN" selected="selected">{{ text_en }}</option>
                      {% endif %}
                    </select>
                    </div>
                    </div>
                    <div class="form-group">
                    <label class="col-sm-2 control-label">{{ entry_order_status }}</label>
                    <div class="col-sm-10">
                      <select name="payment_alphabank_order_status_id" class="form-control">
                        {% for order_status in order_statuses %}
                          {% if order_status.order_status_id == payment_alphabank_order_status_id %}
                            <option value="{{ order_status.order_status_id }}" selected="selected">{{ order_status.name }}</option>
                          {% else %}
                            <option value="{{ order_status.order_status_id }}">{{ order_status.name }}</option>
                          {% endif %}
                        {% endfor %}
                      </select>
                    </div>
                    </div>
                    <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-geo-zone">{{ entry_geo_zone }}</label>
                    <div class="col-sm-10">
                      <select name="payment_alphabank_geo_zone_id" id="input-geo-zone" class="form-control">
                        <option value="0">{{ text_all_zones }}</option>
                        {% for geo_zone in geo_zones %}
                        {% if payment_alphabank_geo_zone_id == geo_zone.geo_zone_id %}
                        <option value="{{ geo_zone.geo_zone_id }}" selected="selected">{{ geo_zone.name }}</option>
                         {% else %}
                        <option value="{{ geo_zone.geo_zone_id }}">{{ geo_zone.name }}</option>
                        {% endif %}
                        {% endfor %}
                      </select>
                    </div>
                    </div>
                    <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-total"><span data-toggle="tooltip" title="{{ help_total }}">{{ entry_total }}</span></label>
                    <div class="col-sm-10">
                      <input type="text" name="payment_alphabank_total" value="{{ payment_alphabank_total }}" placeholder="{{ entry_total }}" id="input-total" class="form-control"/>
                    </div>
                    </div>
                    <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-sort-order">{{ entry_sort_order }}</label>
                    <div class="col-sm-10">
                      <input type="text" name="payment_alphabank_sort_order" value="{{ payment_alphabank_sort_order }}" placeholder="{{ entry_sort_order }}" id="input-sort-order" class="form-control"/>
                    </div>
                    </div>

                </div>
                <div class="tab-pane" id="tab-installments">
<!--NEW DOSEIS-->
                <div class="form-group">
                <div class="col-sm-12">
                <table class="table table-striped table-bordered table-hover" id="installment-table">
                <thead><tr><td colspan="12">{{ heading_installments_table }}</td></tr>
                <tr><td colspan="4"><div class="col-sm-3">&nbsp;</div></td><td>{{ heading_installments_amount_from }}</td><td>{{ heading_installments_amount_to }}</td><td colspan="2">{{ heading_installments_number }}</td><td colspan="4"></td></tr>
                </thead>
                <tbody id="installments-container">
                					 {% set set_doseon=0 %}
                  {% if payment_alphabank_doseis.doseis  and  (payment_alphabank_doseis.doseis is iterable) %}

                      {% set set_doseon = payment_alphabank_doseis.doseis|length %}
                      {% set f = 1 %}
                      {% for k, v in payment_alphabank_doseis.doseis %}
                      <tr id="installments-row_{{ f }}"><td colspan="4"><div class="col-sm-3">&nbsp;</div></td><td><input type="text" name="payment_alphabank_doseis[doseis][{{f}}][poso_apo]" class="form-control" value="{{ v.poso_apo }}"></td><td><input type="text" name="payment_alphabank_doseis[doseis][{{f}}][poso_eos]" class="form-control" value="{{ v.poso_eos }}"></td>
                      <td colspan="2"><select name="payment_alphabank_doseis[doseis][{{f}}][arithmos_doseon]" class="form-control">
                          <option value="0" {{ v.arithmos_doseon == 0? ' Selected':'' }} > 0 </option>
                          {% for i in 2..36 %}
                              <option value="{{ i }}" {{ v.arithmos_doseon == i ? 'Selected':'' }}>{{ i }}</option>
                          {% endfor %}
                      </select>
                      </td>
                      <td colspan="2"><div class="col-sm-3">&nbsp;</div></td><td><button type="button" onclick="$('#installments-row_{{ f }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td><td></td>
                      </tr>
                      {% set f = f + 1 %}
                      {% endfor %}
                      {% endif %}
                </tbody>
                <tfoot>
                <tr><td colspan="11">&nbsp;</td><td width="60"><button type="button" onclick="addInstallmentRow('set_doseon+1');" data-toggle="tooltip" title="{{ button_installment_row_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td></tr>
                </tfoot>
                </table>
                </div>
                </div>
<!--NEW DOSEIS END-->
                </div>
                <div class="tab-pane" id="tab-about">
                  <div class="panel panel-default col-md-4 col-md-offset-4">
                    <div class="panel-heading">Alphabank payment</div>
                    <div class="panel-body">
                   <table class="table table-hover">
                      <tbody>
                        <tr>
                          <td>Author:</td>
                          <td>ITcore</td>
                        </tr>
                        <tr>
                          <td>License</td>
                          <td>{{ license }}</td>
                        </tr>
                        <tr>
                          <td>Support</td>
                          <td><a href="mailto:support@itcore.gr?Subject=Module%20Support" target="_top">support@itcore.gr</a></td>
                        </tr>
                      </tbody>
                    </table>
                    </div>
                  </div>
                </div>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>
<script>

var z = {{ set_doseon + 1 }};
function addInstallmentRow(k){
    var html = '<tr><td colspan="4"><div class="col-sm-3">&nbsp;</div></td><td><input type="text" name="payment_alphabank_doseis[doseis][' + z + '][poso_apo]" class="form-control"></td><td><input type="text" name="payment_alphabank_doseis[doseis][' + z + '][poso_eos]" class="form-control"></td>';
        html += '<td colspan="2"><select name="payment_alphabank_doseis[doseis][' + z + '][arithmos_doseon]" class="form-control">';
        html += '<option value="0">Please select</option>';
        for(var a = 1; a < 37; a++){
            html += '<option value="'+a+'">'+a+'</option>';
        }
        html += '</select></td><td colspan="2"><div class="col-sm-3">&nbsp;</div></td><td></td><td></td></tr>';
    $('#installments-container').append(html);
    z++;
}
</script>
{{ footer }}
